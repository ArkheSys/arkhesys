<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="cwkGestao.Modelo" namespace="cwkGestao.Modelo">
  <class name="Servico" table="Servico">

    <id name="ID" column="id">
      <generator class="identity" />
    </id>
    <property name="Codigo" column="codigo" type="Int32" />
    <property name="Nome" column="nome" type="string" length="80" />
    <property name="Valor" column="valor" type="Decimal" precision="18" scale="2" />
    <property name="Descricao" column="descricao" type="string"  />
    <property name="Tipo" column="tipo" type="bool" />
    <property name="GeraBD" column="geraBD" type="bool" />
    <property name="Incdata" column="incdata" type="DateTime" />
    <property name="Incusuario" column="incusuario" type="string" length="20" />
    <property name="Altdata" column="altdata" type="DateTime" />
    <property name="Altusuario" column="altusuario" type="string" length="20" />

    <property name="BaseRetencaoImposto" column="BaseRetencaoImposto" type="bool" />
    <property name="CodigoItemListaServico" column="CodigoItemListaServico" type="string" />
    <property name="TipoTributacao" column="TipoTributacao" type="Int32" />
	  <property name="ExigibilidadeISS" column="ExigibilidadeISS" type="Int32" />
	  <property name="Art" column="Art" type="string" />
	  <property name="CodigoObra" column="CodigoObra" type="string" />
	  <property name="IncentivoFiscal" column="IncentivoFiscal" type="int" />
    
    <property name="Imagem" type="StringClob">
      <column name="Imagem" sql-type="varchar(max)"/>
    </property> 
    
    <property name="InformacoesAdicionais" column="InformacoesAdicionais" type="string" />

    <many-to-one name="PlanoDeContas" column="PlanoDeContas" class="PlanoConta" lazy="false"  not-null="false" />

    <bag name="Materiais" table="ProdutoServico" lazy="false" inverse="true" cascade="all-delete-orphan" >
      <key column="IDServico" />
      <one-to-many class="ProdutoServico" />
    </bag>

    <bag name="ServicoImpostos" table="ServicoServicoImposto" inverse="true" cascade="all-delete-orphan" lazy="false">
      <key column="IDServico" />
      <one-to-many class="ServicoServicoImposto" />
    </bag>

    <bag name="Ofd_Servicos" table="Ofd_PropostaOrcamentoServicos" inverse="true" lazy="false" >
      <key column="IDServico" />
      <one-to-many class="Ofd_PropostaOrcamentoServicos" />
    </bag>

    <bag name="LogAlteracaoPedidoItens" table="LogAlteracaoPedidoItem" inverse="true" cascade="all-delete-orphan" lazy="false" >
      <key column="IDServico" />
      <one-to-many class="LogAlteracaoPedidoItem" />
    </bag>

  </class>
</hibernate-mapping>
