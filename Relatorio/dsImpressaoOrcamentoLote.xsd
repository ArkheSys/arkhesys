<?xml version="1.0" encoding="utf-8"?>
<xs:schema id="dsImpressaoOrcamentoLote" targetNamespace="http://tempuri.org/dsImpressaoOrcamentoLote.xsd" xmlns:mstns="http://tempuri.org/dsImpressaoOrcamentoLote.xsd" xmlns="http://tempuri.org/dsImpressaoOrcamentoLote.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:msprop="urn:schemas-microsoft-com:xml-msprop" attributeFormDefault="qualified" elementFormDefault="qualified">
  <xs:annotation>
    <xs:appinfo source="urn:schemas-microsoft-com:xml-msdatasource">
      <DataSource DefaultConnectionIndex="0" FunctionsComponentName="QueriesTableAdapter" Modifier="AutoLayout, AnsiClass, Class, Public" SchemaSerializationMode="IncludeSchema" xmlns="urn:schemas-microsoft-com:xml-msdatasource">
        <Connections>
          <Connection AppSettingsObjectName="Settings" AppSettingsPropertyName="cwkcwkGestaoConnectionString" ConnectionStringObject="" IsAppSettingsProperty="true" Modifier="Assembly" Name="cwkcwkGestaoConnectionString (Settings)" ParameterPrefix="@" PropertyReference="ApplicationSettings.Relatorio.Properties.Settings.GlobalReference.Default.cwkcwkGestaoConnectionString" Provider="System.Data.SqlClient" />
        </Connections>
        <Tables>
          <TableAdapter BaseClass="System.ComponentModel.Component" DataAccessorModifier="AutoLayout, AnsiClass, Class, Public" DataAccessorName="dttaImpOrcLote" GeneratorDataComponentClassName="dttaImpOrcLote" Name="dtImpOrcLote" UserDataComponentName="dttaImpOrcLote">
            <MainSource>
              <DbSource ConnectionRef="cwkcwkGestaoConnectionString (Settings)" DbObjectType="Unknown" FillMethodModifier="Public" FillMethodName="Fill" GenerateMethods="Both" GenerateShortCommands="false" GeneratorGetMethodName="GetData" GeneratorSourceName="Fill" GetMethodModifier="Public" GetMethodName="GetData" QueryType="Rowset" ScalarCallRetval="System.Object, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" UseOptimisticConcurrency="false" UserGetMethodName="GetData" UserSourceName="Fill">
                <SelectCommand>
                  <DbCommand CommandType="Text" ModifiedByUser="true">
                    <CommandText>SELECT 
	  P.Codigo, PROD.Codigo AS CodProduto
	
	, PROD.Nome AS DescProduto
	, PIT.Unidade, PIT.Quantidade, PIT.Valor AS ValorCalculado, PIT.Total AS Valor
	
	, F.Nome AS NomeEmpresa, F.CNPJ
	, CASE WHEN F.Telefone IS NOT NULL THEN F.Telefone + ' ' ELSE '' END 
	+ CASE WHEN F.Email IS NOT NULL THEN '- E-MAIL: ' + F.Email + ' ' ELSE '' END 
	+ CASE WHEN F.Site IS NOT NULL THEN '- SITE: ' + F.Site ELSE '' END AS ContatoEmpresa


	, CASE WHEN F.Endereco IS NOT NULL THEN F.Endereco + ', ' ELSE '' END 
	+ CASE WHEN F.Bairro IS NOT NULL THEN F.Bairro + ', ' ELSE '' END 
	+ C.Nome + '-' + E.Sigla + '.' + ' CEP: ' + F.CEP AS EndCompEmpresa

	, P1.Nome AS NomeCliente, P1.Fantasia, P1.CNPJ_CPF, P1.Inscricao
	, (SELECT TOP(1) 
		 CASE WHEN PEND.Endereco IS NOT NULL THEN PEND.Endereco + ', ' ELSE '' END
		+CASE WHEN PEND.Numero IS NOT NULL THEN PEND.Numero + ', ' ELSE '' END
		+CASE WHEN (ISNULL(PEND.Complemento,'') != '') THEN PEND.Complemento + ', ' ELSE '' END
		+CASE WHEN PEND.Bairro IS NOT NULL THEN PEND.Bairro + ', ' ELSE '' END 
		+' ' + CID.Nome + '-' + UF.Sigla + ' ' + ', CEP: ' + PEND.CEP
		 FROM PessoaEndereco PEND 
		 JOIN Cidade CID ON PEND.IDCidade = CID.ID
		 JOIN UF UF ON CID.IDUF = UF.ID
		 WHERE PEND.IDPessoa = P1.ID AND PEND.bPrincipal = 1) AS EndPessoa

FROM PedidoItem PIT
JOIN Pedido P ON PIT.IDPedido = P.ID
JOIN Produto PROD ON PIT.IDProduto = PROD.ID
LEFT JOIN FILIAL F ON P.IDFilial = F.ID
LEFT JOIN CIDADE C ON F.IDCidade = C.ID
LEFT JOIN UF E ON C.IDUF = E.ID
LEFT JOIN PESSOA P1 ON P.IDPessoa = P1.ID

WHERE P.ID IN (SELECT * FROM F_RetornaTabelaLista(@IDPEDIDOS,','))</CommandText>
                    <Parameters>
                      <Parameter AllowDbNull="false" AutogeneratedName="IDPEDIDOS" ColumnName="" DataSourceName="" DataTypeServer="varchar" DbType="AnsiString" Direction="Input" ParameterName="@IDPEDIDOS" Precision="0" Scale="0" Size="1024" SourceColumn="" SourceColumnNullMapping="false" SourceVersion="Current" />
                    </Parameters>
                  </DbCommand>
                </SelectCommand>
              </DbSource>
            </MainSource>
            <Mappings>
              <Mapping SourceColumn="Codigo" DataSetColumn="Codigo" />
              <Mapping SourceColumn="CodProduto" DataSetColumn="CodProduto" />
              <Mapping SourceColumn="DescProduto" DataSetColumn="DescProduto" />
              <Mapping SourceColumn="Unidade" DataSetColumn="Unidade" />
              <Mapping SourceColumn="Quantidade" DataSetColumn="Quantidade" />
              <Mapping SourceColumn="ValorCalculado" DataSetColumn="ValorCalculado" />
              <Mapping SourceColumn="Valor" DataSetColumn="Valor" />
              <Mapping SourceColumn="CNPJ" DataSetColumn="CNPJ" />
              <Mapping SourceColumn="ContatoEmpresa" DataSetColumn="ContatoEmpresa" />
              <Mapping SourceColumn="EndCompEmpresa" DataSetColumn="EndCompEmpresa" />
              <Mapping SourceColumn="Fantasia" DataSetColumn="Fantasia" />
              <Mapping SourceColumn="CNPJ_CPF" DataSetColumn="CNPJ_CPF" />
              <Mapping SourceColumn="Inscricao" DataSetColumn="Inscricao" />
              <Mapping SourceColumn="EndPessoa" DataSetColumn="EndPessoa" />
              <Mapping SourceColumn="NomeEmpresa" DataSetColumn="NomeEmpresa" />
              <Mapping SourceColumn="NomeCliente" DataSetColumn="NomeCliente" />
            </Mappings>
            <Sources />
          </TableAdapter>
        </Tables>
        <Sources />
      </DataSource>
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="dsImpressaoOrcamentoLote" msdata:IsDataSet="true" msdata:UseCurrentLocale="true" msprop:EnableTableAdapterManager="true" msprop:Generator_DataSetName="dsImpressaoOrcamentoLote" msprop:Generator_UserDSName="dsImpressaoOrcamentoLote">
    <xs:complexType>
      <xs:choice minOccurs="0" maxOccurs="unbounded">
        <xs:element name="dtImpOrcLote" msprop:Generator_UserTableName="dtImpOrcLote" msprop:Generator_RowEvArgName="dtImpOrcLoteRowChangeEvent" msprop:Generator_TableVarName="tabledtImpOrcLote" msprop:Generator_TablePropName="dtImpOrcLote" msprop:Generator_RowDeletingName="dtImpOrcLoteRowDeleting" msprop:Generator_RowChangingName="dtImpOrcLoteRowChanging" msprop:Generator_RowDeletedName="dtImpOrcLoteRowDeleted" msprop:Generator_RowEvHandlerName="dtImpOrcLoteRowChangeEventHandler" msprop:Generator_TableClassName="dtImpOrcLoteDataTable" msprop:Generator_RowChangedName="dtImpOrcLoteRowChanged" msprop:Generator_RowClassName="dtImpOrcLoteRow">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Codigo" msprop:Generator_ColumnVarNameInTable="columnCodigo" msprop:Generator_ColumnPropNameInRow="Codigo" msprop:Generator_ColumnPropNameInTable="CodigoColumn" msprop:Generator_UserColumnName="Codigo" type="xs:int" />
              <xs:element name="CodProduto" msprop:Generator_ColumnVarNameInTable="columnCodProduto" msprop:Generator_ColumnPropNameInRow="CodProduto" msprop:Generator_ColumnPropNameInTable="CodProdutoColumn" msprop:Generator_UserColumnName="CodProduto">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="DescProduto" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnDescProduto" msprop:Generator_ColumnPropNameInRow="DescProduto" msprop:Generator_ColumnPropNameInTable="DescProdutoColumn" msprop:Generator_UserColumnName="DescProduto" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="2147483647" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Unidade" msprop:Generator_ColumnVarNameInTable="columnUnidade" msprop:Generator_ColumnPropNameInRow="Unidade" msprop:Generator_ColumnPropNameInTable="UnidadeColumn" msprop:Generator_UserColumnName="Unidade" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="5" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Quantidade" msprop:Generator_ColumnVarNameInTable="columnQuantidade" msprop:Generator_ColumnPropNameInRow="Quantidade" msprop:Generator_ColumnPropNameInTable="QuantidadeColumn" msprop:Generator_UserColumnName="Quantidade" type="xs:decimal" />
              <xs:element name="ValorCalculado" msprop:Generator_ColumnVarNameInTable="columnValorCalculado" msprop:Generator_ColumnPropNameInRow="ValorCalculado" msprop:Generator_ColumnPropNameInTable="ValorCalculadoColumn" msprop:Generator_UserColumnName="ValorCalculado" type="xs:decimal" />
              <xs:element name="Valor" msprop:Generator_ColumnVarNameInTable="columnValor" msprop:Generator_ColumnPropNameInRow="Valor" msprop:Generator_ColumnPropNameInTable="ValorColumn" msprop:Generator_UserColumnName="Valor" type="xs:decimal" />
              <xs:element name="CNPJ" msprop:Generator_ColumnVarNameInTable="columnCNPJ" msprop:Generator_ColumnPropNameInRow="CNPJ" msprop:Generator_ColumnPropNameInTable="CNPJColumn" msprop:Generator_UserColumnName="CNPJ" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="ContatoEmpresa" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnContatoEmpresa" msprop:Generator_ColumnPropNameInRow="ContatoEmpresa" msprop:Generator_ColumnPropNameInTable="ContatoEmpresaColumn" msprop:Generator_UserColumnName="ContatoEmpresa" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="550" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="EndCompEmpresa" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnEndCompEmpresa" msprop:Generator_ColumnPropNameInRow="EndCompEmpresa" msprop:Generator_ColumnPropNameInTable="EndCompEmpresaColumn" msprop:Generator_UserColumnName="EndCompEmpresa" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="244" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Fantasia" msprop:Generator_ColumnVarNameInTable="columnFantasia" msprop:Generator_ColumnPropNameInRow="Fantasia" msprop:Generator_ColumnPropNameInTable="FantasiaColumn" msprop:Generator_UserColumnName="Fantasia" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="CNPJ_CPF" msprop:Generator_ColumnVarNameInTable="columnCNPJ_CPF" msprop:Generator_ColumnPropNameInRow="CNPJ_CPF" msprop:Generator_ColumnPropNameInTable="CNPJ_CPFColumn" msprop:Generator_UserColumnName="CNPJ_CPF" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="Inscricao" msprop:Generator_ColumnVarNameInTable="columnInscricao" msprop:Generator_ColumnPropNameInRow="Inscricao" msprop:Generator_ColumnPropNameInTable="InscricaoColumn" msprop:Generator_UserColumnName="Inscricao" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="20" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="EndPessoa" msdata:ReadOnly="true" msprop:Generator_ColumnVarNameInTable="columnEndPessoa" msprop:Generator_ColumnPropNameInRow="EndPessoa" msprop:Generator_ColumnPropNameInTable="EndPessoaColumn" msprop:Generator_UserColumnName="EndPessoa" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="451" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="NomeEmpresa" msprop:Generator_ColumnVarNameInTable="columnNomeEmpresa" msprop:Generator_ColumnPropNameInRow="NomeEmpresa" msprop:Generator_ColumnPropNameInTable="NomeEmpresaColumn" msprop:Generator_UserColumnName="NomeEmpresa" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="60" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
              <xs:element name="NomeCliente" msprop:Generator_ColumnVarNameInTable="columnNomeCliente" msprop:Generator_ColumnPropNameInRow="NomeCliente" msprop:Generator_ColumnPropNameInTable="NomeClienteColumn" msprop:Generator_UserColumnName="NomeCliente" minOccurs="0">
                <xs:simpleType>
                  <xs:restriction base="xs:string">
                    <xs:maxLength value="80" />
                  </xs:restriction>
                </xs:simpleType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:complexType>
  </xs:element>
</xs:schema>